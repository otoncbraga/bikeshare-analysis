Q1 <- read.csv("C:/Users/johnattan.douglas/Desktop/capitalbikeshare/2017Q1-capitalbikeshare-tripdata.csv")
Q2 <- read.csv("C:/Users/johnattan.douglas/Desktop/capitalbikeshare/2017Q2-capitalbikeshare-tripdata.csv")
Q3 <- read.csv("C:/Users/johnattan.douglas/Desktop/capitalbikeshare/2017Q3-capitalbikeshare-tripdata.csv")
Q4 <- read.csv("C:/Users/johnattan.douglas/Desktop/capitalbikeshare/2017Q4-capitalbikeshare-tripdata.csv")
#Juntar as 4 partes em um único lugar
QTOTAL <- rbind(rbind(Q1, Q2), rbind(Q3, Q4));
library("format")
install.packages("format") #formatar valores
datas <- c("2010-06-28", "2011-05-25", "2010-09-28", "2011-12-05", "2010-09-14",
"2010-01-01", "2010-01-02", "2010-01-03", "2010-01-04", "2010-01-04",
"2010-01-04", "2010-01-05", "2010-01-05", "2010-01-05", "2010-01-07")
format.Date(as.Date(datas), "%a")
class(Q1)
class(datas)
?dplyr::mutate
#Cria coluna com dias da semana
testeDia <- Q1
View(Q1)
View(Q1)
testeDia[1]
testeDia[2]
#Cria coluna com dias da semana
transmute(testeDia, week.day = format.Date(as.Date(testeDia[2]), "%A"))
#Instalar bibliotecas
install.packages("ggplot2"); #gerar gráficos
#Carregar bibliotecas
library("ggplot2");
library("sqldf");
library("dplyr");
library("dplyr");
#Cria coluna com dias da semana
transmute(testeDia, week.day = format.Date(as.Date(testeDia[2]), "%A"))
#Cria coluna com dias da semana
mutate(testeDia, week.day = format.Date(as.Date(testeDia[2]), "%A"))
#Cria coluna com dias da semana
testeTodosDias -< Q1[2]
#Cria coluna com dias da semana
testeTodosDias <- Q1[2]
#Cria coluna com dias da semana
mutate(testeTodosDias, week.day = format.Date(as.Date(testeTodosDias[1]), "%A"))
mutate(testeDia, week.day = weekdays(as.Date(testeDia[2])))
mutate(testeDia, week.day = class(testeDia[2]))
View(testeDia)
View(testeDia)
transmute(testeDia, week.day = class(testeDia[2]))
testeDia <- mutate(testeDia, week.day = format.Date(as.Date(testeDia[2]), "%A"))
transmute(testeDia, week.day = class(testeDia[2]))
testeDia <- transmute(testeDia, week.day = class(testeDia[2]))
View(testeDia)
View(testeDia)
#Cria coluna com dias da semana
testeDia <- QTOTAL
testeDia <- mutate(testeDia, tipo1 = class(testeDia[1]), tipo2 = class(testeDia[2]), tipo6 = class(testeDia[6]), tipo3 = class(testeDia[3]))
View(testeDia)
View(testeDia)
testeDia <- mutate(testeDia, tipo1 = class(testeDia[1]), tipo2 = class(as.Date(testeDia[2])), tipo6 = class(testeDia[6]), tipo3 = class(testeDia[3]))
testeDia <- mutate(testeDia, testeDiaSemana = format(testeDia[2], format="%Y"))
View(testeDia)
View(testeDia)
testeDia <- mutate(testeDia, testeDiaSemana = format(testeDia[2], format="%Y"))
testeDia <- mutate(testeDia, testeDiaSemana = format(testeDia[2], format="%Y"));
write.csv(testeDia, "teste.csv")
dia <- “2016-06-06 10:00:12”
dia <- c("2016-06-06 10:00:12")
as.Date(dia)
weekdays(as.Date(dia))
Q1 <- mutate(Q1, week.day = weekdays(as.Date(testeDia[2])));
Q1 <- mutate(Q1, week.day = weekdays(as.POSIXct(testeDia[2])));
install.packages("lubridate");
library("lubridate");
dia <- ymd_hms(dia)
dia <- ymd_hms(dia)
wday(dia)
(dia)
(dia)
wday(dia)
weekdays(as.Date(dia))
weekdays(as.POSIXct(dia))
weekdays(as.POSIXct(as.Date(dia)))
testeDia <- mutate(testeDia, tipo1 = class(testeDia[1]), tipo2 = class(as.Date(testeDia)), tipo6 = class(testeDia[6]), tipo3 = class(testeDia[3]));
filter(QTOTAL, Start.date >= "2017-10-01")
filter(QTOTAL, Start.date >= as.Date("2017-10-01"))
filter(QTOTAL, Start.date == as.Date("2017-10-01"))
filter(QTOTAL, Start.date == as.Date("2017-10-01"))
#Cria coluna com dias da semana #!!!Ainda não está dando certo!!!!
testeDia <- QTOTAL
filter(QTOTAL, Start.date == as.Date("2017-10-01"))
teste42 %>% filter(between(QTOTAL$Start.date, "2017-10-01 00:00:00", "2017-03-31 23:59:59"))
teste42 <- filter(between(QTOTAL$Start.date, "2017-10-01 00:00:00", "2017-03-31 23:59:59"))
teste42 <- QTOTAL %>% filter(between(QTOTAL$Start.date, "2017-10-01 00:00:00", "2017-03-31 23:59:59"))
teste42 <- QTOTAL %>% filter(between(QTOTAL$Start.date, as.Date("2017-10-01 00:00:00"), as.Date("2017-03-31 23:59:59"))
teste42 <- QTOTAL %>% filter(between(QTOTAL$Start.date, as.Date("2017-10-01 00:00:00"), as.Date("2017-03-31 23:59:59")))
teste42 <- filter(QTOTAL, QTOTAL$Start.date > as.Date("2017-10-01 00:00:00"))
library("lubridate");
QTOTAL %>%filter(Start.date >= as.Date("2017-01-05"))
View(testeTodosDias)
#Juntar as 4 partes em um único lugar
QTOTAL <- rbind(rbind(Q1, Q2), rbind(Q3, Q4));
Q1 %>% mutate(weekday = wday(Start.date))
Q1 %>% mutate(weekday = weekdays(Start.date))
Q1 %>% mutate(weekday = weekdays(Start.date))
Q1 %>% mutate(diaSemana = weekdays(Start.date))
Q1 %>% mutate(Q1::Start.date = weekdays(Start.date))
teste42 %>% transmute(Start.date = weekdays(Start.date))
QTOTAL %>% mutate(weekday = wday(Start.date))
QTOTAL <- QTOTAL %>% mutate(weekday = weekdays(Start.date))
QTOTAL <- QTOTAL %>% mutate(weekday = weekdays(QTOTAL::Start.date))
QTOTAL <- QTOTAL %>% mutate(weekday = weekdays(Start.date))
QTOTAL <- QTOTAL %>% mutate(weekday = wday(Start.date))
View(QTOTAL)
View(QTOTAL)
View(QTOTAL)
View(QTOTAL)
#Filtra Estações
# Primavera: 21 mar - 20 jun
# Verão: 21 jun - 20 set
# Outono: 21 set - 20 dez
# Inverno: 21 dez - 20 mar
Primavera <- filter(QTOTAL, Start.date >= as.Date("2017-03-21") & Start.date <= as.Date("2017-06-20"))
#Filtra Estações
# Primavera: 21 mar - 20 jun
# Verão: 21 jun - 20 set
# Outono: 21 set - 20 dez
# Inverno: 21 dez - 20 mar
Primavera <- filter(QTOTAL, (Start.date >= as.Date("2017-03-21")) & (Start.date <= as.Date("2017-06-20")))
#Filtra Estações
# Primavera: 21 mar - 20 jun
# Verão: 21 jun - 20 set
# Outono: 21 set - 20 dez
# Inverno: 21 dez - 20 mar
Primavera <- filter(QTOTAL, Start.date >= as.Date("2017-03-21"))
#Filtra Estações
# Primavera: 21 mar - 20 jun
# Verão: 21 jun - 20 set
# Outono: 21 set - 20 dez
# Inverno: 21 dez - 20 mar
Primavera <- filter(QTOTAL, Start.date >= "2017-03-21")
#Filtra Estações
# Primavera: 21 mar - 20 jun
# Verão: 21 jun - 20 set
# Outono: 21 set - 20 dez
# Inverno: 21 dez - 20 mar
Primavera <- filter(QTOTAL, Start.date >= as.Date.POSIXlt("2017-03-21"))
#Filtra Estações
# Primavera: 21 mar - 20 jun
# Verão: 21 jun - 20 set
# Outono: 21 set - 20 dez
# Inverno: 21 dez - 20 mar
Primavera <- filter(QTOTAL, Start.date >= as.Date.default("2017-03-21"))
#Filtra Estações
# Primavera: 21 mar - 20 jun
# Verão: 21 jun - 20 set
# Outono: 21 set - 20 dez
# Inverno: 21 dez - 20 mar
Primavera <- filter(QTOTAL, Start.date >= as.Date.default(2017-03-21))
QTOTAL <- QTOTAL %>% mutate(weekdayname = wday(Start.date, label=TRUE))
lubridate::wday
?lubridate::wday
QTOTAL <- QTOTAL %>% mutate(weekdaynamecompleto = wday(Start.date, label=TRUE, abbr = FALSE))
#Filtra Estações
# Primavera: 21 mar - 20 jun
# Verão: 21 jun - 20 set
# Outono: 21 set - 20 dez
# Inverno: 21 dez - 20 mar
Primavera <- filter(QTOTAL, Start.date >= as.Date.default("2017-03-21"))
#Filtra Estações
# Primavera: 21 mar - 20 jun
# Verão: 21 jun - 20 set
# Outono: 21 set - 20 dez
# Inverno: 21 dez - 20 mar
Primavera <- filter(QTOTAL, Start.date > as.Date("2017-03-21"))
#Adicionar estações do ano
#Filtra Estações
# Primavera: 21 mar - 20 jun
# Verão: 21 jun - 20 set
# Outono: 21 set - 20 dez
# Inverno: 21 dez - 20 mar
Primavera <- filter(QTOTAL, Start.date >= as.Date("2017-03-21"))
#Adicionar estações do ano
#Filtra Estações
# Primavera: 21 mar - 20 jun
Primavera <- QTOTAL %>% filter(Start.date >= as.Date("2017-03-21"))
#Adicionar estações do ano
#Filtra Estações
# Primavera: 21 mar - 20 jun
Primavera <- QTOTAL %>% filter(QTOTAL::Start.date >= as.Date("2017-03-21"))
#Adicionar estações do ano
#Filtra Estações
# Primavera: 21 mar - 20 jun
Primavera <- QTOTAL %>% filter(QTOTAL[2] >= as.Date("2017-03-21"))
Primavera <- Primavera %>% mutate(season = "Spring")
#Adicionar estações do ano
#Filtra Estações
# Primavera: 21 mar - 20 jun
Primavera <- QTOTAL %>% filter(Start.date >= as.Date("2017-03-21"))
#Adicionar estações do ano
#Filtra Estações
# Primavera: 21 mar - 20 jun
Primavera <- QTOTAL %>% filter(Start.date >= as.Date("2017-03-21 00:00:00"))
#Adicionar estações do ano
#Filtra Estações
#________________________
# Primavera: 21 mar - 20 jun
Primavera <- QTOTAL %>% filter(Start.date>=as.Date("2017-03-21") & Start.date<=as.Date("2017-06-20"))
#Adicionar coluna com dia
QTOTAL <- QTOTAL %>% mutate(dia = mday(Start.date))
#Adicionar coluna com mês
QTOTAL <- QTOTAL %>% mutate(mes = month(Start.date))
#Adicionar coluna com ano
QTOTAL <- QTOTAL %>% mutate(ano = year(Start.date))
View(QTOTAL)
#exportarTabela
write.csv(QTOTAL, "tabela.csv")
library("dplyr");
#Adicionar estações do ano
#Filtra Estações
#________________________
# Primavera: 21 mar - 20 jun
Primavera <- QTOTAL %>% filter(Start.date>=as.Date("2017-03-21") & Start.date<=as.Date("2017-06-20"))
#Adicionar estações do ano
#Filtra Estações
#________________________
# Primavera: 21 mar - 20 jun
Primavera <- QTOTAL %>% filter(Start.date>=(as.Date("2017-03-21")) & Start.date<=(as.Date("2017-06-20")))
#Adicionar estações do ano
#Filtra Estações
#________________________
# Primavera: 21 mar - 20 jun
Primavera <- QTOTAL %>% filter(Start.date>=as.Date("2017-03-21") & Start.date<=as.Date("2017-06-20"))
Primavera <- Primavera %>% mutate(season = "spring")
#________________________
# Verão: 21 jun - 20 set
Verão <- QTOTAL %>% filter(Start.date>=as.Date("2017-06-21") & Start.date<=as.Date("2017-09-20"))
Verão <- Verão %>% mutate(season = "summer")
#________________________
# Outono: 21 set - 20 dez
Outono <- QTOTAL %>% filter(Start.date>=as.Date("2017-09-21") & Start.date<=as.Date("2017-12-20"))
Outono <- Outono %>% mutate(season = "fall")
#________________________
# Inverno: 21 dez - 20 mar
Inverno <- filter(QTOTAL, (Start.date>=as.Date("2017-12-21") & Start.date<=as.Date("2017-12-31")) & (Start.date>=as.Date("2017-01-01") & Start.date<=as.Date("2017-03-20")))
Inverno <- Inverno %>% mutate(season = "winter")
#Junta arquivos
QTOTAL <- rbind(rbind(Primavera, Verão), rbind(Outono, Inverno));
#Juntar as 4 partes em um único lugar
QTOTAL <- rbind(rbind(Q1, Q2), rbind(Q3, Q4));
